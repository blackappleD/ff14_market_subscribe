[{"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\main.ts":"1","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\App.vue":"2","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\store\\index.ts":"3","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\router\\index.ts":"4","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\components\\Register.vue":"5","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\components\\Subscribe.vue":"6"},{"size":219,"mtime":1735094994161,"results":"7","hashOfConfig":"8"},{"size":528,"mtime":1735108245218,"results":"9","hashOfConfig":"8"},{"size":150,"mtime":1735094835714,"results":"10","hashOfConfig":"8"},{"size":496,"mtime":1735108167480,"results":"11","hashOfConfig":"8"},{"size":1663,"mtime":1735108170829,"results":"12","hashOfConfig":"8"},{"size":5889,"mtime":1735119151876,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1oqlc4l",{"filePath":"17","messages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"20","messages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"24","messages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"26","messages":"27","errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"28"},"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\main.ts",[],[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\App.vue",[],[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\store\\index.ts",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\router\\index.ts",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\components\\Register.vue",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\components\\Subscribe.vue",["29"],"<template>\r\n    <main class=\"subscribe-container\">\r\n        <section>\r\n            <h1>订阅物品</h1>\r\n            <form @submit.prevent=\"subscribeItem\">\r\n                <div>\r\n                    <label for=\"worldName\">大区:</label>\r\n                    <input type=\"text\" v-model=\"subscription.worldName\" @input=\"fetchWorlds(subscription.worldName)\"\r\n                        placeholder=\"输入大区名称\" required />\r\n                    <ul v-if=\"worlds.length > 0\" class=\"dropdown-list\">\r\n                        <li v-for=\"world in worlds\" :key=\"world.id\" @click=\"selectWorld(world.name)\">\r\n                            {{ world.name }}\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div>\r\n                    <label for=\"itemName\">物品:</label>\r\n                    <input type=\"text\" v-model=\"subscription.itemName\" @input=\"fetchItems(subscription.itemName)\"\r\n                        placeholder=\"输入物品名称\" required />\r\n                    <ul v-if=\"items.length > 0\" class=\"dropdown-list\">\r\n                        <li v-for=\"item in items\" :key=\"item.id\" @click=\"selectItem(item.name)\">\r\n                            {{ item.name }}\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div>\r\n                    <label for=\"notifyThreshold\">价格阈值:</label>\r\n                    <input type=\"number\" v-model=\"subscription.notifyThreshold\" />\r\n                </div>\r\n                <button type=\"submit\">订阅</button>\r\n            </form>\r\n            <p v-if=\"errorMessage\">{{ errorMessage }}</p>\r\n        </section>\r\n    </main>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref } from 'vue';\r\nimport axios from 'axios';\r\n\r\ninterface World {\r\n    id: number;\r\n    name: string;\r\n}\r\n\r\ninterface Item {\r\n    id: number;\r\n    name: string;\r\n}\r\n\r\nexport default defineComponent({\r\n    name: 'SubscribeComponent',\r\n    setup() {\r\n        const subscription = ref({\r\n            itemName: '',\r\n            worldName: '',\r\n            notifyThreshold: null\r\n        });\r\n        const errorMessage = ref('');\r\n        const worlds = ref<World[]>([]);\r\n        const items = ref<Item[]>([]);\r\n\r\n        let timeout: NodeJS.Timeout;\r\n\r\n        const fetchWorlds = async (name: string) => {\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(async () => {\r\n                if (!name) {\r\n                    worlds.value = [];\r\n                    return;\r\n                }\r\n                try {\r\n                    const response = await axios.get(`/ff14/world/search?name=${name}`);\r\n                    worlds.value = response.data;\r\n                } catch (error) {\r\n                    console.error(error);\r\n                    errorMessage.value = '获取大区列表失败，请重试。';\r\n                }\r\n            }, 300);\r\n        };\r\n\r\n        const fetchItems = async (name: string) => {\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(async () => {\r\n                if (!name) {\r\n                    items.value = [];\r\n                    return;\r\n                }\r\n                try {\r\n                    const response = await axios.get(`/ff14/item/search?name=${name}`);\r\n                    items.value = response.data;\r\n                } catch (error) {\r\n                    console.error(error);\r\n                    errorMessage.value = '获取物品列表失败，请重试。';\r\n                }\r\n            }, 300);\r\n        };\r\n\r\n        const selectWorld = (name: string) => {\r\n            subscription.value.worldName = name;\r\n            worlds.value = [];\r\n        };\r\n\r\n        const selectItem = (name: string) => {\r\n            subscription.value.itemName = name;\r\n            items.value = [];\r\n        };\r\n\r\n        const subscribeItem = async () => {\r\n            try {\r\n                const response = await axios.post('/ff14/subscribe', subscription.value);\r\n                console.log(response.data);\r\n                alert('订阅成功！');\r\n            } catch (error) {\r\n                console.error(error);\r\n                errorMessage.value = '订阅失败，请重试。';\r\n            }\r\n        };\r\n\r\n        return {\r\n            subscription,\r\n            subscribeItem,\r\n            errorMessage,\r\n            worlds,\r\n            items,\r\n            fetchWorlds,\r\n            fetchItems,\r\n            selectWorld,\r\n            selectItem\r\n        };\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.subscribe-container {\r\n    background-image: url('@/assets/images/background.png');\r\n    /* 替换为您的动漫背景图片路径 */\r\n    background-size: 100% 100%;\r\n    /* 全屏拉伸 */\r\n    background-position: center;\r\n    height: 100vh;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nsection {\r\n    background: rgba(255, 255, 255, 0.8);\r\n    padding: 20px;\r\n    border-radius: 10px;\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\nh1 {\r\n    text-align: center;\r\n}\r\n\r\nform {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\ndiv {\r\n    margin-bottom: 15px;\r\n}\r\n\r\nlabel {\r\n    margin-bottom: 5px;\r\n}\r\n\r\ninput {\r\n    padding: 10px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n}\r\n\r\n.dropdown-list {\r\n    list-style-type: none;\r\n    padding: 0;\r\n    margin: 0;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n    max-height: 150px;\r\n    overflow-y: auto;\r\n    position: absolute;\r\n    background: white;\r\n    z-index: 10;\r\n}\r\n\r\n.dropdown-list li {\r\n    padding: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n.dropdown-list li:hover {\r\n    background-color: #f0f0f0;\r\n}\r\n\r\nbutton {\r\n    padding: 10px;\r\n    background-color: #42b983;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n    background-color: #36a76a;\r\n}\r\n</style>\r\n",{"ruleId":"30","severity":2,"message":"31","line":63,"column":22,"nodeType":"32","messageId":"33","endLine":63,"endColumn":28},"no-undef","'NodeJS' is not defined.","Identifier","undef"]