[{"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\main.ts":"1","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\App.vue":"2","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\router\\index.ts":"3","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\store\\index.ts":"4","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Login.vue":"5","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Register.vue":"6","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Subscribe.vue":"7","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Home.vue":"8","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\store\\modules\\auth.ts":"9","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\utils\\axios.ts":"10"},{"size":195,"mtime":1735206586520,"results":"11","hashOfConfig":"12"},{"size":552,"mtime":1735193788623,"results":"13","hashOfConfig":"12"},{"size":718,"mtime":1735522947511,"results":"14","hashOfConfig":"12"},{"size":183,"mtime":1735206584769,"results":"15","hashOfConfig":"12"},{"size":5050,"mtime":1735287151221,"results":"16","hashOfConfig":"12"},{"size":4320,"mtime":1735206122630,"results":"17","hashOfConfig":"12"},{"size":19843,"mtime":1735290258246,"results":"18","hashOfConfig":"12"},{"size":5349,"mtime":1735206483764,"results":"19","hashOfConfig":"12"},{"size":1994,"mtime":1735270594963,"results":"20","hashOfConfig":"12"},{"size":1472,"mtime":1735527075360,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"sm0ih3",{"filePath":"25","messages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"28","messages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"27"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\main.ts",[],[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\App.vue",[],[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\router\\index.ts",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\store\\index.ts",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Login.vue",["45"],"<template>\r\n    <div class=\"login-container\">\r\n        <div class=\"nav-bar\">\r\n            <router-link to=\"/\" class=\"nav-item\">首页</router-link>\r\n            <router-link to=\"/subscribe\" class=\"nav-item\">物品订阅</router-link>\r\n        </div>\r\n        <div class=\"content\">\r\n            <div class=\"login-box\">\r\n                <h1 class=\"title\">登录</h1>\r\n                <form @submit.prevent=\"handleLogin\" class=\"login-form\">\r\n                    <div class=\"form-group\">\r\n                        <input type=\"text\" v-model=\"loginForm.userAccount\" class=\"input-field\" placeholder=\"请输入账户名/邮箱\"\r\n                            required>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <input type=\"password\" v-model=\"loginForm.password\" class=\"input-field\" placeholder=\"请输入密码\"\r\n                            required>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <button type=\"submit\" class=\"login-btn\">登录</button>\r\n                    </div>\r\n                    <div class=\"form-footer\">\r\n                        <router-link to=\"/register\" class=\"register-link\">没有账号？立即注册</router-link>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\nimport axios from '@/utils/axios';\r\n\r\nexport default defineComponent({\r\n    name: 'LoginPage',\r\n    setup() {\r\n        const router = useRouter();\r\n        const store = useStore();\r\n        const loginForm = ref({\r\n            userAccount: '',\r\n            password: ''\r\n        });\r\n\r\n        const handleLogin = async () => {\r\n            try {\r\n                // 1. 登录请求\r\n                const loginResponse = await axios.post('/ff14/user/login', loginForm.value);\r\n                console.log('Login response:', loginResponse.data);\r\n\r\n                // 2. 设置 token\r\n                const { tokenValue, userId } = loginResponse.data;\r\n                if (!tokenValue) {\r\n                    throw new Error('登录返回的数据格式不正确');\r\n                }\r\n\r\n                // 3. 更新 Vuex store\r\n                store.commit('auth/setToken', tokenValue);\r\n                store.commit('auth/setLoggedIn', true);\r\n\r\n                // 4. 获取用户信息\r\n                const userInfoResponse = await axios.get(`/ff14/user/info`);\r\n                console.log('User info response:', userInfoResponse.data);\r\n\r\n                const userInfo = userInfoResponse.data;\r\n                if (userInfo) {\r\n                    store.commit('auth/setUser', {\r\n                        userName: userInfo.userName,\r\n                        email: userInfo.email\r\n                    });\r\n                }\r\n\r\n                // 5. 跳转到首页\r\n                router.push('/');\r\n            } catch (error: any) {\r\n                console.error('登录失败:', error);\r\n                const errorMessage = error.response?.data?.message || '登录失败，请重试';\r\n                alert(errorMessage);\r\n            }\r\n        };\r\n\r\n        return {\r\n            loginForm,\r\n            handleLogin\r\n        };\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n    min-height: 100vh;\r\n    background-color: #ffffff;\r\n}\r\n\r\n.nav-bar {\r\n    padding: 15px 0;\r\n    display: flex;\r\n    gap: 30px;\r\n    border-bottom: 1px solid #eee;\r\n    margin-left: 20px;\r\n}\r\n\r\n.nav-item {\r\n    text-decoration: none;\r\n    color: #666;\r\n    font-size: 14px;\r\n    position: relative;\r\n}\r\n\r\n.content {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding-top: 100px;\r\n}\r\n\r\n.login-box {\r\n    width: 400px;\r\n    padding: 40px;\r\n    background: #fff;\r\n    border-radius: 8px;\r\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.title {\r\n    font-size: 24px;\r\n    color: #333;\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n    font-weight: normal;\r\n}\r\n\r\n.login-form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 20px;\r\n}\r\n\r\n.form-group {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.input-field {\r\n    height: 40px;\r\n    padding: 0 15px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    transition: border-color 0.3s;\r\n}\r\n\r\n.input-field:focus {\r\n    outline: none;\r\n    border-color: #4285f4;\r\n}\r\n\r\n.login-btn {\r\n    width: 100%;\r\n    height: 40px;\r\n    background-color: #4285f4;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    transition: background-color 0.3s;\r\n}\r\n\r\n.login-btn:hover {\r\n    background-color: #3367d6;\r\n}\r\n\r\n.form-footer {\r\n    text-align: center;\r\n    margin-top: 10px;\r\n}\r\n\r\n.register-link {\r\n    color: #4285f4;\r\n    text-decoration: none;\r\n    font-size: 14px;\r\n}\r\n\r\n.register-link:hover {\r\n    text-decoration: underline;\r\n}\r\n</style>\r\n","D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Register.vue",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Subscribe.vue",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\views\\Home.vue",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\store\\modules\\auth.ts",[],"D:\\cursor_workspace\\ff14_market_subscribe\\ff14_market_subscribe_frontend\\src\\utils\\axios.ts",[],{"ruleId":"46","severity":1,"message":"47","line":54,"column":37,"nodeType":"48","messageId":"49","endLine":54,"endColumn":43},"@typescript-eslint/no-unused-vars","'userId' is assigned a value but never used.","Identifier","unusedVar"]